## Encapsulation

Encapsulation is the concept of **bundling data (properties) and methods (functions) together in a class** while **hiding the internal details** from outside code.  

**Example in PHP:**
```php
class Person {
    private $name; // hidden property

    public function setName($n) { $this->name = $n; }
    public function getName() { return $this->name; }
}

$p = new Person();
$p->setName("Alice");
echo $p->getName(); // Alice
```
**Benefits**:
- Protects the internal state of objects
- Reduces unintended misuse
- Makes code easier to maintain
---

## Encapsulation and Access Modifiers

**Encapsulation** is the OOP concept of **hiding internal data** and controlling access.  
**Access modifiers** (`private`, `protected`, `public`) are the tools used to implement encapsulation.

**Example:**
```php
class Person {
    private $name;       // hidden property
    public function setName($n) { $this->name = $n; }
    public function getName() { return $this->name; }
}

$p = new Person();
$p->setName("Alice");
echo $p->getName(); // Alice
```
---
## WrongEncapsulation
- You make the property private and provide getters/setters. âœ…
- But if the getter returns the internal object directly, outside code can still change it. âŒ
- The internal state is not truly protected.
```php
<?php

class CreditCard {
    private $number;
    private $expiry;

    public function __construct($number, $expiry) {
        $this->number = $number;
        $this->expiry = $expiry;
    }

    // Getter for number
    public function getNumber() {
        return $this->number; // Could return a masked number for safety
    }

    // Setter for number
    public function setNumber($number) {
        $this->number = $number;
    }

    // Getter for expiry
    public function getExpiry() {
        return $this->expiry;
    }

    // Setter for expiry
    public function setExpiry($expiry) {
        $this->expiry = $expiry;
    }
}

class WrongEncapsulation {
    private CreditCard $card;

    public function setCard(CreditCard $c) {
        $this->card = $c;
    }

    public function getCard(): CreditCard {
        return $this->card; // Warning: exposes the internal object
    }
}

// Example usage
$myCard = new CreditCard("1234-5678-9012-3456", "12/25");
$wrapper = new WrongEncapsulation();
$wrapper->setCard($myCard);

$cardFromWrapper = $wrapper->getCard();
echo $cardFromWrapper->getNumber(); // Outputs the card number
```

## Safe Encapsulation
- Still use private properties and getters/setters. âœ…
- But store a copy when setting, and return a copy when getting. âœ…
- External code works on the copy, so the internal state cannot be changed.
```php
<?php

class SafeEncapsulation {
    private CreditCard $card;

    public function setCard(CreditCard $c) {
        $this->card = clone $c; // store a copy
    }

    public function getCard(): CreditCard {
        return clone $this->card; // return a copy
    }
}

// Sample usage
$myCard = new CreditCard("1234-5678-9012-3456", "12/25");
$safeWrapper = new SafeEncapsulation();
$safeWrapper->setCard($myCard);

// External code tries to modify
$cardFromSafeWrapper = $safeWrapper->getCard();
$cardFromSafeWrapper->setNumber("9999-9999-9999-9999"); 

echo $safeWrapper->getCard()->getNumber(); 
// Outputs: 1234-5678-9012-3456 â†’ internal card remains safe âœ…
```

# ğŸ”’ Wrong vs Safe Encapsulation in PHP

This guide shows the difference between **wrong (unsafe)** and **safe (true)** encapsulation in PHP using getters and setters.

## âš–ï¸ Comparison Table

| Aspect                     | âŒ Wrong Encapsulation                     | âœ… Safe Encapsulation                         |
|-----------------------------|-------------------------------------------|---------------------------------------------|
| **Property access**         | `private`                                  | `private`                                   |
| **Getter behavior**         | Returns the actual internal object ğŸ›‘      | Returns a **copy** of the object ğŸ”         |
| **Setter behavior**         | Stores the original object                | Stores a **copy** of the object             |
| **Can external code modify internal state?** | Yes â€” internal state can be changed directly âš ï¸ | No â€” internal state stays safe âœ…           |
| **Encapsulation quality**   | Broken / Unsafe                            | True / Safe ğŸ”’                               |

---

## ğŸ’» Example Usage in PHP

```php
// âŒ Wrong Encapsulation
$wrapper->getCard()->setNumber("9999-9999-9999-9999"); 
// internal card is modified

// âœ… Safe Encapsulation
$cardCopy = $safeWrapper->getCard();
$cardCopy->setNumber("9999-9999-9999-9999"); 
// only copy is changed, internal card is safe
